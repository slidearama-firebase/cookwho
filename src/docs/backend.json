
{
  "entities": {
    "user": {
      "title": "User",
      "description": "A user of the application.",
      "type": "object",
      "properties": {
        "username": {
          "type": "string",
          "description": "The user's unique handle, automatically generated (e.g., @myusername)."
        },
        "displayName": {
          "type": "string",
          "description": "The user's chosen display name, used as the restaurant name for cooks."
        },
        "email": {
          "type": "string",
          "format": "email",
          "description": "The user's email address."
        },
        "mobile": {
          "type": "string",
          "description": "The user's mobile phone number, required only for cooks."
        },
        "postcode": {
          "type": "string",
          "description": "The user's postcode, required only for cooks."
        },
        "latitude": {
          "type": "number",
          "description": "The latitude of the user's postcode."
        },
        "longitude": {
          "type": "number",
          "description": "The longitude of the user's postcode."
        },
        "isCook": {
          "type": "boolean",
          "description": "Whether the user is a cook."
        },
        "isAdmin": {
          "type": "boolean",
          "description": "Whether the user is an administrator."
        }
      },
      "required": ["username", "displayName", "email"]
    },
    "restaurant": {
      "title": "Restaurant",
      "description": "A restaurant with its location.",
      "type": "object",
      "properties": {
        "userId": {
          "type": "string",
          "description": "The ID of the user who owns this restaurant."
        },
        "name": {
            "type": "string",
            "description": "The display name of the restaurant, provided by the cook."
        },
        "rating": {
          "type": "number",
          "description": "The restaurant's integer rating out of 5."
        },
        "latitude": {
          "type": "number",
          "description": "The latitude of the restaurant's location."
        },
        "longitude": {
          "type": "number",
          "description": "The longitude of the restaurant's location."
        },
        "email": {
          "type": "string",
          "format": "email",
          "description": "The restaurant's email address for account purposes."
        },
        "restaurantImageUrl": {
          "type": "string",
          "description": "The URL for the restaurant's main profile image."
        },
        "showcaseImageUrls": {
          "type": "array",
          "description": "URLs of showcase images for the cook (e.g., kitchen, house exterior).",
          "items": {
            "type": "string",
            "format": "uri"
          }
        },
        "description": {
            "type": "string",
            "description": "A description of the cook and their restaurant, written by the cook."
        },
        "isAvailable": {
          "type": "boolean",
          "description": "Whether the cook is currently available to take orders."
        }
      },
      "required": ["userId", "name", "rating", "latitude", "longitude"]
    },
    "masterMenuCategory": {
      "title": "Master Menu Category",
      "description": "A single category in the master list, created by an admin (e.g., 'Full Breakfast').",
      "type": "object",
      "properties": {
        "name": {
          "type": "string",
          "description": "The name of the menu category."
        },
        "cuisine": {
            "type": "string",
            "description": "The cuisine type (e.g., English, Indian, Italian).",
            "enum": ["English", "Indian", "Italian"]
        }
      },
      "required": ["name", "cuisine"]
    },
    "cookMenuItem": {
        "title": "Cook's Menu Item",
        "description": "A cook's specific version of a master menu category item, including their own description and price.",
        "type": "object",
        "properties": {
          "masterCategoryId": {
            "type": "string",
            "description": "The ID of the master menu category this item is based on."
          },
          "name": {
            "type": "string",
            "description": "The name of the menu item (e.g., 'Full English Breakfast')."
          },
          "description": {
            "type": "string",
            "description": "The cook's own description of the item."
          },
          "price": {
            "type": "number",
            "description": "The price of the item."
          },
          "tags": {
            "type": "array",
            "description": "Descriptive tags for the menu item.",
            "items": {
              "type": "string"
            }
          },
          "imageUrls": {
            "type": "array",
            "description": "URLs of images for the menu item.",
            "items": {
                "type": "string",
                "format": "uri"
            }
          }
        },
        "required": ["masterCategoryId", "name", "description", "price"]
    },
    "order": {
        "title": "Order",
        "description": "An order placed by a customer.",
        "type": "object",
        "properties": {
          "userId": {
            "type": "string",
            "description": "The ID of the user who placed the order."
          },
          "cookId": {
            "type": "string",
            "description": "The ID of the cook fulfilling the order."
          },
          "items": {
            "type": "array",
            "description": "The items included in the order.",
            "items": {
              "$ref": "#/entities/cookMenuItem"
            }
          },
          "totalPrice": {
            "type": "number",
            "description": "The total price of the order in the smallest currency unit (e.g., pence)."
          },
          "status": {
            "type": "string",
            "enum": ["pending", "paid", "preparing", "ready", "delivered", "cancelled"]
          },
          "createdAt": {
            "type": "string",
            "format": "date-time"
          },
          "stripePaymentIntentId": {
            "type": "string",
            "description": "The ID of the Stripe Payment Intent."
          }
        },
        "required": ["userId", "cookId", "items", "totalPrice", "status", "createdAt", "stripePaymentIntentId"]
      }
  },
  "auth": {
    "providers": ["email"]
  },
  "firestore": {
    "/users/{userId}": {
      "schema": { "$ref": "#/entities/user" },
      "description": "Stores user profile information."
    },
    "/restaurants/{userId}": {
      "schema": { "$ref": "#/entities/restaurant" },
      "description": "Stores information about available restaurants, where the document ID is the user ID."
    },
    "/masterMenuCategories/{categoryId}": {
      "schema": { "$ref": "#/entities/masterMenuCategory" },
      "description": "Stores the master list of all possible menu categories that cooks can choose from."
    },
    "/restaurants/{userId}/menuItems/{menuItemId}": {
        "schema": { "$ref": "#/entities/cookMenuItem" },
        "description": "Stores the actual menu items for a specific cook's restaurant."
    },
    "/orders/{orderId}": {
        "schema": { "$ref": "#/entities/order" },
        "description": "Stores all customer orders."
    }
  }
}
